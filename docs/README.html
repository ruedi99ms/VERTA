<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>VERTA</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { color: inherit; } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">VERTA</h1>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#verta---virtual-environment-route-and-trajectory-analyzer"
id="toc-verta---virtual-environment-route-and-trajectory-analyzer">VERTA
- Virtual Environment Route and Trajectory Analyzer</a>
<ul>
<li><a href="#installation" id="toc-installation">Installation</a></li>
<li><a href="#sample-data" id="toc-sample-data">Sample Data</a></li>
<li><a href="#web-gui" id="toc-web-gui">üñ•Ô∏è Web GUI</a>
<ul>
<li><a href="#intent-recognition" id="toc-intent-recognition">üß† Intent
Recognition</a></li>
</ul></li>
<li><a href="#cli-commands" id="toc-cli-commands">CLI Commands</a>
<ul>
<li><a href="#decision-modes" id="toc-decision-modes">Decision
Modes</a></li>
<li><a href="#parameters-reference"
id="toc-parameters-reference">Parameters Reference</a></li>
<li><a href="#discover-branches" id="toc-discover-branches">1. Discover
Branches</a></li>
<li><a href="#assign-branches" id="toc-assign-branches">2. Assign
Branches</a></li>
<li><a href="#compute-metrics" id="toc-compute-metrics">3. Compute
Metrics</a></li>
<li><a href="#gaze-analysis" id="toc-gaze-analysis">4. Gaze
Analysis</a></li>
<li><a href="#predict-choices" id="toc-predict-choices">5. Predict
Choices</a></li>
<li><a href="#intent-recognition-1" id="toc-intent-recognition-1">6.
Intent Recognition</a></li>
<li><a href="#enhanced-chain-analysis"
id="toc-enhanced-chain-analysis">7. Enhanced Chain Analysis</a></li>
</ul></li>
<li><a href="#output-files-reference"
id="toc-output-files-reference">Output Files Reference</a>
<ul>
<li><a href="#discover-command" id="toc-discover-command">Discover
Command</a></li>
<li><a href="#assign-command" id="toc-assign-command">Assign
Command</a></li>
<li><a href="#metrics-command" id="toc-metrics-command">Metrics
Command</a></li>
<li><a href="#gaze-command" id="toc-gaze-command">Gaze Command</a></li>
<li><a href="#predict-command" id="toc-predict-command">Predict
Command</a></li>
<li><a href="#intent-recognition-command"
id="toc-intent-recognition-command">Intent Recognition Command</a></li>
<li><a href="#chain-enhanced-command"
id="toc-chain-enhanced-command">Chain-Enhanced Command</a></li>
</ul></li>
<li><a href="#behavioral-pattern-analysis"
id="toc-behavioral-pattern-analysis">Behavioral Pattern Analysis</a>
<ul>
<li><a href="#pattern-types" id="toc-pattern-types">Pattern
Types</a></li>
<li><a href="#example-analysis-results"
id="toc-example-analysis-results">Example Analysis Results</a></li>
<li><a href="#applications" id="toc-applications">Applications</a></li>
</ul></li>
<li><a href="#configuration"
id="toc-configuration">Configuration</a></li>
<li><a href="#dependencies" id="toc-dependencies">Dependencies</a>
<ul>
<li><a href="#python-version" id="toc-python-version">Python
Version</a></li>
<li><a href="#core-dependencies" id="toc-core-dependencies">Core
Dependencies</a></li>
<li><a href="#ml-capabilities-intent-recognition"
id="toc-ml-capabilities-intent-recognition">ML Capabilities (Intent
Recognition)</a></li>
<li><a href="#optional-dependencies"
id="toc-optional-dependencies">Optional Dependencies</a></li>
<li><a href="#gui-specific-dependencies"
id="toc-gui-specific-dependencies">GUI-Specific Dependencies</a></li>
</ul></li>
<li><a href="#troubleshooting"
id="toc-troubleshooting">Troubleshooting</a>
<ul>
<li><a href="#common-issues" id="toc-common-issues">Common
Issues</a></li>
<li><a href="#getting-help" id="toc-getting-help">Getting Help</a></li>
<li><a href="#data-format-requirements"
id="toc-data-format-requirements">Data Format Requirements</a></li>
</ul></li>
<li><a href="#tips" id="toc-tips">Tips</a></li>
<li><a href="#ai-usage-disclosure" id="toc-ai-usage-disclosure">AI Usage
Disclosure</a></li>
<li><a href="#license" id="toc-license">License</a></li>
</ul></li>
</ul>
</nav>
<h1 id="verta---virtual-environment-route-and-trajectory-analyzer">VERTA
- Virtual Environment Route and Trajectory Analyzer</h1>
<figure>
<img src="verta_logo.png" alt="VERTA Logo" />
<figcaption aria-hidden="true">VERTA Logo</figcaption>
</figure>
<p><code>VERTA</code> is a comprehensive toolkit to analyze route
choices from x‚Äìz movement trajectories: discover branch directions
(common route choices that occur at an intersection), assign movement
trajectories to existing branches (if new data was recorded), compute
timing metrics, visualize results, and predict future route choices
based on behavioral patterns. <code>VERTA</code> includes both
command-line interface (CLI) and interactive web GUI.</p>
<h2 id="installation">Installation</h2>
<p><strong>Requirements:</strong> Python ‚â•3.8</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Core installation</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install verta</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># With optional extras</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install verta<span class="pp">[</span><span class="ss">yaml</span><span class="pp">]</span>      <span class="co"># YAML configuration support</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install verta<span class="pp">[</span><span class="ss">parquet</span><span class="pp">]</span>    <span class="co"># Parquet file format support  </span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install verta<span class="pp">[</span><span class="ss">gui</span><span class="pp">]</span>        <span class="co"># GUI dependencies (streamlit, plotly)</span></span></code></pre></div>
<p>This installs a console script <code>verta</code> and enables the web
GUI.</p>
<h2 id="sample-data">Sample Data</h2>
<p>The repository includes a <strong><code>sample_data/</code></strong>
folder with example trajectory CSV files you can use to try VERTA
without your own data. The files contain head position (X, Z), time, and
optional gaze/physiological columns in the same format as the CLI
examples (e.g.¬†<code>Headset.Head.Position.X</code>,
<code>Headset.Head.Position.Z</code>, <code>Time</code>). Use them with
any command by pointing <code>--input</code> at the folder:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">verta</span> discover <span class="at">--input</span> ./sample_data <span class="at">--columns</span> x=Headset.Head.Position.X,z=Headset.Head.Position.Z,t=Time <span class="at">--scale</span> 0.2 <span class="at">--junction</span> 520 330 <span class="at">--radius</span> 20 <span class="at">--out</span> ./outputs</span></code></pre></div>
<p>See <a href="#data-format-requirements">Data Format Requirements</a>
for column details.</p>
<h2 id="web-gui">üñ•Ô∏è Web GUI</h2>
<p>For an interactive, user-friendly interface, try the web-based
GUI:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install GUI dependencies (same as: pip install verta[gui])</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install verta<span class="pp">[</span><span class="ss">gui</span><span class="pp">]</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Launch the web interface (recommended)</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="ex">verta</span> gui</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Alternative methods</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> gui/launch.py</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="ex">streamlit</span> run src/verta/verta_gui.py</span></code></pre></div>
<p>You can also customize the port and host:</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">verta</span> gui <span class="at">--port</span> 8502              <span class="co"># Use a different port</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">verta</span> gui <span class="at">--host</span> 0.0.0.0           <span class="co"># Allow external connections</span></span></code></pre></div>
<p><strong>Output Location:</strong> The GUI saves all analysis results
to a <code>gui_outputs/</code> directory in your current working
directory. Different analysis types create subdirectories (e.g.,
<code>gui_outputs/junction_0/</code>, <code>gui_outputs/metrics/</code>,
<code>gui_outputs/gaze_analysis/</code>).</p>
<p>See <a href="gui/README.md"><code>gui/README.md</code></a> for
detailed GUI documentation.</p>
<p>The GUI provides: - <strong>Interactive junction editor</strong> with
drag-and-drop functionality - <strong>Visual zone definition</strong>
for start/end points - <strong>Real-time analysis</strong> with live
parameter adjustment - <strong>Interactive visualizations</strong> with
Plotly charts - <strong>Gaze and physiological analysis</strong> (head
yaw, pupil dilation) - <strong>Flow graph generation</strong> and
conditional probability analysis - <strong>Pattern recognition</strong>
and behavioral insights - <strong>Intent Recognition</strong> - ML-based
early route prediction (see below) - <strong>Export
capabilities</strong> in multiple formats (JSON, CSV, ZIP) -
<strong>Multi-junction analysis</strong> with evacuation planning
features</p>
<h3 id="intent-recognition">üß† Intent Recognition</h3>
<p>Predict user route choices <strong>before</strong> they reach
decision points using machine learning:</p>
<ul>
<li><strong>Features extracted</strong>: Spatial (distance, angle,
offset), kinematic (speed, acceleration, curvature), gaze (if
available), physiological (if available), contextual</li>
<li><strong>Models</strong>: Random Forest (fast, robust) or Gradient
Boosting (higher accuracy)</li>
<li><strong>Prediction distances</strong>: Configure multiple prediction
points (100, 75, 50, 25 units before junction)</li>
<li><strong>Cross-validation</strong>: Built-in model evaluation with
customizable folds</li>
<li><strong>Feature importance</strong>: Understand which cues users
rely on for decisions</li>
<li><strong>Accuracy analysis</strong>: See how prediction improves as
users approach the junction</li>
</ul>
<p><strong>Use cases:</strong> - Proactive wayfinding systems -
Predictive content loading - Dynamic environment optimization - A/B
testing of early interventions</p>
<p>üìö <strong>Documentation</strong>: See <a
href="examples"><code>examples</code></a> for a comprehensive guide to
Intent Recognition, including usage examples, model loading, and
integration into VR systems.</p>
<h2 id="cli-commands">CLI Commands</h2>
<p>VERTA provides 7 main commands for different types of analysis:</p>
<h3 id="decision-modes">Decision Modes</h3>
<p>VERTA uses <strong>decision modes</strong> to determine where along a
trajectory a route choice (branch decision) is made after passing
through a junction. The decision point is used to extract the direction
vector that represents the chosen route. Three modes are available:</p>
<ul>
<li><p><strong><code>pathlen</code></strong>: Measures the path length
traveled after entering the junction. The decision point is where the
trajectory has traveled a specified distance (set by
<code>--distance</code>, default: 100 units) from the junction entry
point. This mode works well for consistent movement speeds and is
computationally efficient.</p></li>
<li><p><strong><code>radial</code></strong>: Uses radial distance from
the junction center. The decision point is where the trajectory crosses
an outer radius (<code>--r_outer</code>) with an outward trend (moving
away from the junction center). This mode is useful when trajectories
move at varying speeds, as it‚Äôs based on spatial position rather than
path length.</p></li>
<li><p><strong><code>hybrid</code></strong> (recommended): Tries radial
mode first, and if that doesn‚Äôt find a decision point, falls back to
pathlen mode. This provides the best of both approaches and handles a
wider variety of trajectory patterns.</p></li>
</ul>
<p><strong>When to use each mode:</strong> - Use <code>pathlen</code>
for fast processing when trajectories have consistent speeds - Use
<code>radial</code> when trajectories vary significantly in speed or
when you want spatial-based detection - Use <code>hybrid</code>
(default) for the most robust detection across different scenarios</p>
<h3 id="parameters-reference">Parameters Reference</h3>
<p>This section provides a comprehensive overview of all parameters used
across VERTA commands. Individual command sections highlight only the
most relevant parameters for that command.</p>
<h4 id="common-parameters">Common Parameters</h4>
<p>These parameters are used across most commands:</p>
<ul>
<li><strong><code>--input</code></strong> (required): Path to input
directory or file containing trajectory data</li>
<li><strong><code>--out</code></strong> /
<strong><code>--output</code></strong>: Path to output directory for
results (default: current directory)</li>
<li><strong><code>--glob</code></strong>: File pattern to match input
files (default: <code>"*.csv"</code>)</li>
<li><strong><code>--columns</code></strong>: Column mapping in format
<code>x=ColumnX,z=ColumnZ,t=TimeColumn</code>. Maps your CSV columns to
VERTA‚Äôs expected coordinate names</li>
<li><strong><code>--scale</code></strong>: Coordinate scaling factor
(default: 1.0). Use if your coordinates need scaling (e.g.,
<code>0.2</code> to convert from millimeters to meters)</li>
<li><strong><code>--config</code></strong>: Path to YAML configuration
file for batch parameter settings</li>
</ul>
<h4 id="junction-parameters">Junction Parameters</h4>
<p>Define the location and size of junctions (decision points):</p>
<ul>
<li><strong><code>--junction</code></strong>: Junction center
coordinates and radius as <code>x y radius</code> (e.g.,
<code>520 330 20</code>)</li>
<li><strong><code>--junctions</code></strong>: Multiple junctions as
space-separated triplets: <code>x1 y1 r1 x2 y2 r2 ...</code></li>
<li><strong><code>--radius</code></strong>: Junction radius (used with
<code>--junction</code> when radius is specified separately)</li>
</ul>
<h4 id="decision-mode-parameters">Decision Mode Parameters</h4>
<p>Control how decision points are detected (see <a
href="#decision-modes">Decision Modes</a> above):</p>
<ul>
<li><strong><code>--decision_mode</code></strong>: Choose
<code>pathlen</code>, <code>radial</code>, or <code>hybrid</code>
(default varies by command)</li>
<li><strong><code>--distance</code></strong>: Path length after junction
for decision detection in <code>pathlen</code> mode (default: 100.0
units)</li>
<li><strong><code>--r_outer</code></strong>: Outer radius for
<code>radial</code> decision mode. Trajectory must cross this radius
with outward movement</li>
<li><strong><code>--r_outer_list</code></strong>: List of outer radii
for multiple junctions (one per junction)</li>
<li><strong><code>--linger_delta</code></strong>: Additional distance
beyond junction required for decision detection (default: 5.0)</li>
<li><strong><code>--epsilon</code></strong>: Minimum step size for
trajectory processing (default: 0.015). Smaller values detect finer
movements</li>
<li><strong><code>--trend_window</code></strong>: Window size for trend
analysis in radial mode (default: 5)</li>
<li><strong><code>--min_outward</code></strong>: Minimum outward
movement threshold for radial detection (default: 0.0)</li>
</ul>
<h4 id="clustering-parameters">Clustering Parameters</h4>
<p>Used by the <code>discover</code> command to identify branch
directions:</p>
<ul>
<li><strong><code>--cluster_method</code></strong>: Clustering algorithm
- <code>kmeans</code> (fast, requires known k), <code>auto</code> (finds
optimal k), or <code>dbscan</code> (density-based, finds variable number
of clusters)</li>
<li><strong><code>--k</code></strong>: Number of clusters for kmeans
(default: 3)</li>
<li><strong><code>--k_min</code></strong>,
<strong><code>--k_max</code></strong>: Range for auto clustering
(default: 2-6)</li>
<li><strong><code>--angle_eps</code></strong>: Angle epsilon for DBSCAN
clustering in degrees (default: 15.0)</li>
<li><strong><code>--min_samples</code></strong>: Minimum samples per
cluster for DBSCAN (default: 5)</li>
<li><strong><code>--min_sep_deg</code></strong>: Minimum angular
separation in degrees between branch centers (default: 12.0). Branches
closer than this are merged</li>
<li><strong><code>--seed</code></strong>: Random seed for
reproducibility (default: 0)</li>
</ul>
<h4 id="assignment-parameters">Assignment Parameters</h4>
<p>Used when assigning trajectories to existing branches:</p>
<ul>
<li><strong><code>--centers</code></strong>: Path to previously
discovered branch centers file (.npy format) - <strong>required</strong>
for <code>assign</code> command</li>
<li><strong><code>--assign_angle_eps</code></strong>: Angle tolerance in
degrees for branch assignment (default: 15.0). Trajectory direction must
be within this angle of a branch center</li>
</ul>
<h4 id="analysis-parameters">Analysis Parameters</h4>
<p>Control analysis behavior and output:</p>
<ul>
<li><strong><code>--analyze_sequences</code></strong>: Enable route
sequence analysis across multiple junctions</li>
<li><strong><code>--predict_examples</code></strong>: Number of concrete
prediction examples to generate (default: 50)</li>
<li><strong><code>--physio_window</code></strong>: Time window in
seconds for physiological data analysis (default: 3.0)</li>
</ul>
<h4 id="machine-learning-parameters-intent-recognition">Machine Learning
Parameters (Intent Recognition)</h4>
<p>Parameters for ML-based intent recognition:</p>
<ul>
<li><strong><code>--prediction_distances</code></strong>: Distances
before junction to make predictions (default: <code>100 75 50 25</code>
units)</li>
<li><strong><code>--model_type</code></strong>: ML model -
<code>random_forest</code> (fast, robust) or
<code>gradient_boosting</code> (higher accuracy, slower)</li>
<li><strong><code>--cv_folds</code></strong>: Number of cross-validation
folds for model evaluation (default: 5)</li>
<li><strong><code>--test_split</code></strong>: Fraction of data
reserved for testing (default: 0.2)</li>
<li><strong><code>--with_gaze</code></strong>: Include gaze and
physiological data in feature extraction (if available)</li>
<li><strong><code>--assignments</code></strong>: Path to pre-computed
branch assignments file (optional, speeds up analysis)</li>
</ul>
<h4 id="visualization-parameters">Visualization Parameters</h4>
<p>Control plot generation:</p>
<ul>
<li><strong><code>--plot_intercepts</code></strong>: Generate decision
intercepts visualization (default: True)</li>
<li><strong><code>--show_paths</code></strong>: Show trajectory paths in
plots (default: True)</li>
<li>Use <code>--no-plot_intercepts</code> and
<code>--no-show_paths</code> to disable specific visualizations</li>
</ul>
<h4 id="chain-analysis-parameters">Chain Analysis Parameters</h4>
<p>For multi-junction analysis:</p>
<ul>
<li><strong><code>--evacuation_analysis</code></strong>: Enable
evacuation efficiency analysis</li>
<li><strong><code>--generate_recommendations</code></strong>: Generate
traffic flow recommendations</li>
<li><strong><code>--risk_assessment</code></strong>: Perform risk
assessment metrics</li>
</ul>
<h3 id="discover-branches">1. Discover Branches</h3>
<p>Discover branch directions from trajectory data using clustering
algorithms:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">verta</span> discover <span class="dt">\</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">--input</span> ./data <span class="dt">\</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">--glob</span> <span class="st">&quot;*.csv&quot;</span> <span class="dt">\</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">--columns</span> x=Headset.Head.Position.X,z=Headset.Head.Position.Z,t=Time <span class="dt">\</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">--scale</span> 0.2 <span class="dt">\</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">--junction</span> 520 330 <span class="at">--radius</span> 20 <span class="dt">\</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">--distance</span> 100 <span class="dt">\</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">--decision_mode</span> hybrid <span class="dt">\</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">--cluster_method</span> auto <span class="dt">\</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">--out</span> ./outputs</span></code></pre></div>
<p><strong>Key Parameters:</strong> - <code>--cluster_method</code>:
Choose from <code>kmeans</code>, <code>auto</code>, or
<code>dbscan</code> (default: <code>kmeans</code>) -
<code>--decision_mode</code>: <code>pathlen</code>, <code>radial</code>,
or <code>hybrid</code> (default: <code>hybrid</code>) -
<code>--k</code>: Number of clusters for kmeans (default: 3) -
<code>--k_min</code>, <code>--k_max</code>: Range for auto clustering
(default: 2-6)</p>
<p>See <a href="#parameters-reference">Parameters Reference</a> for all
available parameters including decision mode, clustering, and
visualization options.</p>
<h3 id="assign-branches">2. Assign Branches</h3>
<p>Assign new trajectories to previously discovered branch centers:</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">verta</span> assign <span class="dt">\</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">--input</span> ./new_data <span class="dt">\</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">--columns</span> x=X,z=Z,t=time <span class="dt">\</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">--junction</span> 520 330 <span class="at">--radius</span> 20 <span class="dt">\</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">--distance</span> 100 <span class="dt">\</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">--centers</span> ./outputs/branch_centers.npy <span class="dt">\</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">--out</span> ./outputs/new_assignments</span></code></pre></div>
<p><strong>Key Parameters:</strong> - <code>--centers</code>: Path to
previously discovered branch centers (.npy file) -
<strong>required</strong> - <code>--decision_mode</code>:
<code>pathlen</code>, <code>radial</code>, or <code>hybrid</code>
(default: <code>pathlen</code>) - <code>--assign_angle_eps</code>: Angle
tolerance for branch assignment (default: 15.0 degrees)</p>
<p>See <a href="#parameters-reference">Parameters Reference</a> for
decision mode and other common parameters.</p>
<p><strong>Use Cases:</strong> - Assign new test data to previously
discovered branches - Apply learned branch structure to new datasets -
Batch processing of multiple trajectory sets</p>
<h3 id="compute-metrics">3. Compute Metrics</h3>
<p>Calculate timing and speed metrics for trajectories:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">verta</span> metrics <span class="dt">\</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">--input</span> ./data <span class="dt">\</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">--columns</span> x=X,z=Z,t=time <span class="dt">\</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">--junction</span> 520 330 <span class="at">--radius</span> 20 <span class="dt">\</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">--distance</span> 100 <span class="dt">\</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">--decision_mode</span> radial <span class="at">--r_outer</span> 30 <span class="dt">\</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">--out</span> ./outputs</span></code></pre></div>
<p><strong>Key Parameters:</strong> - <code>--decision_mode</code>:
<code>pathlen</code>, <code>radial</code>, or <code>hybrid</code>
(default: <code>pathlen</code>) - <code>--trend_window</code>: Window
size for trend analysis (default: 5) - <code>--min_outward</code>:
Minimum outward movement threshold (default: 0.0)</p>
<p>See <a href="#parameters-reference">Parameters Reference</a> for
decision mode and junction parameters.</p>
<p><strong>Metrics Computed:</strong> - Time to travel specified path
length after junction - Speed through junction (entry, exit, average
transit) - Junction transit speed analysis - Basic trajectory metrics
(total distance, duration, average speed)</p>
<h3 id="gaze-analysis">4. Gaze Analysis</h3>
<p>Analyze head movement and physiological data at decision points:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">verta</span> gaze <span class="dt">\</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">--input</span> ./gaze_data <span class="dt">\</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">--columns</span> x=X,z=Z,t=time,yaw=HeadYaw,pupil=PupilDilation <span class="dt">\</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">--junction</span> 520 330 <span class="at">--radius</span> 20 <span class="dt">\</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">--distance</span> 100 <span class="dt">\</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">--physio_window</span> 3.0 <span class="dt">\</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">--out</span> ./gaze_outputs</span></code></pre></div>
<p><strong>Key Parameters:</strong> - <code>--physio_window</code>: Time
window in seconds for physiological data analysis (default: 3.0)</p>
<p>See <a href="#parameters-reference">Parameters Reference</a> for
decision mode, junction, and other common parameters.</p>
<p><strong>Analysis Features:</strong> - Head yaw direction at decision
points - Pupil dilation trajectory analysis - Physiological metrics
(heart rate, etc.) at junctions - Gaze-movement consistency analysis</p>
<h3 id="predict-choices">5. Predict Choices</h3>
<p>Analyze behavioral patterns and predict future route choices:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">verta</span> predict <span class="dt">\</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">--input</span> ./data <span class="dt">\</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">--columns</span> x=Headset.Head.Position.X,z=Headset.Head.Position.Z,t=Time <span class="dt">\</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">--scale</span> 0.2 <span class="dt">\</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">--junctions</span> 520 330 20  600 400 20  700 450 20 <span class="dt">\</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">--r_outer_list</span> 30 32 30 <span class="dt">\</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">--distance</span> 100 <span class="dt">\</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">--decision_mode</span> hybrid <span class="dt">\</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">--cluster_method</span> auto <span class="dt">\</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">--analyze_sequences</span> <span class="dt">\</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">--predict_examples</span> 50 <span class="dt">\</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">--out</span> ./outputs/prediction</span></code></pre></div>
<p><strong>Key Parameters:</strong> - <code>--analyze_sequences</code>:
Enable route sequence analysis across multiple junctions -
<code>--predict_examples</code>: Number of concrete prediction examples
to generate (default: 50)</p>
<p>See <a href="#parameters-reference">Parameters Reference</a> for
clustering, decision mode, and junction parameters.</p>
<p><strong>Prediction Features:</strong> - Behavioral pattern
recognition (preferred, learned, direct) - Conditional probability
analysis between junctions - Route sequence analysis - Confidence
scoring for predictions - Concrete prediction examples</p>
<h3 id="intent-recognition-1">6. Intent Recognition</h3>
<p>ML-based early route prediction - predict user route choices
<strong>before</strong> they reach decision points:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">verta</span> intent <span class="dt">\</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">--input</span> ./data <span class="dt">\</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">--columns</span> x=Headset.Head.Position.X,z=Headset.Head.Position.Z,t=Time <span class="dt">\</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">--scale</span> 0.2 <span class="dt">\</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">--junction</span> 520 330 20 <span class="dt">\</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">--distance</span> 100 <span class="dt">\</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">--prediction_distances</span> 100 75 50 25 <span class="dt">\</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">--model_type</span> random_forest <span class="dt">\</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">--cv_folds</span> 5 <span class="dt">\</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">--test_split</span> 0.2 <span class="dt">\</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">--out</span> ./outputs/intent_recognition</span></code></pre></div>
<p><strong>Key Parameters:</strong> -
<code>--prediction_distances</code>: Distances before junction to make
predictions (default: 100, 75, 50, 25 units) -
<code>--model_type</code>: Choose <code>random_forest</code> (fast) or
<code>gradient_boosting</code> (higher accuracy) -
<code>--with_gaze</code>: Include gaze and physiological data if
available - <code>--centers</code>: Use pre-computed branch centers
(optional) - <code>--assignments</code>: Use pre-computed branch
assignments (optional)</p>
<p>See <a href="#parameters-reference">Parameters Reference</a> for all
ML and decision mode parameters.</p>
<p><strong>Intent Recognition Features:</strong> - Multi-distance
prediction models (train at 100, 75, 50, 25 units before junction) -
Feature importance analysis (spatial, kinematic, gaze, physiological) -
Accuracy analysis showing prediction improvement with proximity -
Cross-validated model evaluation - Saved models for production
deployment - Sample predictions with confidence scores</p>
<p><strong>Use Cases:</strong> - Proactive wayfinding systems -
Predictive content loading - Dynamic environment optimization - A/B
testing of early interventions</p>
<h3 id="enhanced-chain-analysis">7. Enhanced Chain Analysis</h3>
<p>Multi-junction analysis with evacuation planning features:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">verta</span> chain-enhanced <span class="dt">\</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">--input</span> ./data <span class="dt">\</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">--columns</span> x=X,z=Z,t=time <span class="dt">\</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">--junctions</span> 520 330 20  600 400 20  700 450 20 <span class="dt">\</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">--r_outer_list</span> 30 32 30 <span class="dt">\</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">--distance</span> 100 <span class="dt">\</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">--evacuation_analysis</span> <span class="dt">\</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">--generate_recommendations</span> <span class="dt">\</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">--risk_assessment</span> <span class="dt">\</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">--out</span> ./outputs/chain_analysis</span></code></pre></div>
<p><strong>Key Parameters:</strong> -
<code>--evacuation_analysis</code>: Enable evacuation efficiency
analysis - <code>--generate_recommendations</code>: Generate traffic
flow recommendations - <code>--risk_assessment</code>: Perform risk
assessment metrics</p>
<p>See <a href="#parameters-reference">Parameters Reference</a> for
decision mode, junction, and other common parameters.</p>
<p><strong>Enhanced Features:</strong> - Flow graph generation -
Evacuation efficiency analysis - Risk assessment metrics - Traffic flow
recommendations</p>
<h2 id="output-files-reference">Output Files Reference</h2>
<p>Each command generates specific output files:</p>
<h3 id="discover-command">Discover Command</h3>
<ul>
<li><code>branch_assignments.csv</code> - Main branch assignments</li>
<li><code>branch_assignments_all.csv</code> - All assignments including
outliers</li>
<li><code>branch_centers.npy</code> / <code>branch_centers.json</code> -
Branch center coordinates</li>
<li><code>branch_summary.csv</code> - Branch count statistics with
entropy</li>
<li><code>Branch_Directions.png</code> - Visual plot of branch
directions</li>
<li><code>Branch_Counts.png</code> - Bar chart of branch
frequencies</li>
<li><code>Decision_Intercepts.png</code> - Trajectory decision points
visualization</li>
<li><code>Decision_Map.png</code> - Overview map of decisions</li>
</ul>
<h3 id="assign-command">Assign Command</h3>
<ul>
<li><code>branch_assignments.csv</code> - New trajectory
assignments</li>
<li><code>run_args.json</code> - Command parameters used</li>
</ul>
<h3 id="metrics-command">Metrics Command</h3>
<ul>
<li><code>timing_and_speed_metrics.csv</code> - Comprehensive timing and
speed data</li>
<li><code>run_args.json</code> - Command parameters used</li>
</ul>
<h3 id="gaze-command">Gaze Command</h3>
<ul>
<li><code>gaze_analysis.csv</code> - Head yaw analysis at decision
points</li>
<li><code>physiological_analysis.csv</code> - Physiological metrics at
junctions</li>
<li><code>pupil_trajectory_analysis.csv</code> - Pupil dilation
trajectory data</li>
<li><code>gaze_consistency_report.json</code> - Gaze-movement alignment
statistics</li>
<li><code>Gaze_Directions.png</code> - Head movement visualization</li>
<li><code>Physiological_Analysis.png</code> - Physiological metrics by
branch</li>
<li><code>Pupil_Trajectory_Analysis.png</code> - Pupil dilation
plots</li>
</ul>
<h3 id="predict-command">Predict Command</h3>
<ul>
<li><code>choice_pattern_analysis.json</code> - Complete pattern
analysis results</li>
<li><code>choice_patterns.png</code> - Behavioral pattern
visualization</li>
<li><code>transition_heatmap.png</code> - Junction transition
probabilities</li>
<li><code>prediction_examples.json</code> - Concrete prediction
examples</li>
<li><code>prediction_confidence.png</code> - Confidence analysis
plots</li>
<li><code>sequence_analysis.json</code> - Route sequence analysis (if
<code>--analyze_sequences</code>)</li>
<li><code>analysis_summary.json</code> - High-level summary with
recommendations</li>
</ul>
<h3 id="intent-recognition-command">Intent Recognition Command</h3>
<ul>
<li><code>intent_recognition_summary.csv</code> - Summary of model
accuracy per junction and distance</li>
<li><code>intent_recognition_junction_summary.csv</code> - Average
accuracy per junction</li>
<li><code>intent_recognition_results.json</code> - Complete analysis
results</li>
<li><code>junction_*/models/</code> - Trained model files
(model_<em>.pkl, scaler_</em>.pkl)</li>
<li><code>junction_*/intent_training_results.json</code> - Model metrics
and feature importance</li>
<li><code>junction_*/intent_feature_importance.png</code> - Feature
importance visualization</li>
<li><code>junction_*/intent_accuracy_analysis.png</code> - Accuracy
vs.¬†distance chart</li>
<li><code>junction_*/test_predictions.json</code> - Sample predictions
with confidence scores</li>
</ul>
<h3 id="chain-enhanced-command">Chain-Enhanced Command</h3>
<ul>
<li><code>Chain_Overview.png</code> - Multi-junction trajectory
overview</li>
<li><code>Chain_SmallMultiples.png</code> - Detailed
junction-by-junction view</li>
<li><code>Flow_Graph_Map.png</code> - Flow diagram between
junctions</li>
<li><code>Per_Junction_Flow_Graph.png</code> - Individual junction flow
analysis</li>
<li><code>branch_decisions_chain.csv</code> - Complete decision chain
data</li>
</ul>
<h2 id="behavioral-pattern-analysis">Behavioral Pattern Analysis</h2>
<p>VERTA identifies three types of behavioral patterns:</p>
<h3 id="pattern-types">Pattern Types</h3>
<ul>
<li><strong>Preferred Patterns</strong> (probability ‚â• 0.7): Strong
behavioral preferences that are highly predictable</li>
<li><strong>Learned Patterns</strong> (probability 0.5-0.7): Patterns
that develop over time as participants learn the environment<br />
</li>
<li><strong>Direct Patterns</strong> (probability 0.3-0.5): Basic route
choices without strong preferences</li>
</ul>
<h3 id="example-analysis-results">Example Analysis Results</h3>
<div class="sourceCode" id="cb12"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;summary&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;total_sequences&quot;</span><span class="fu">:</span> <span class="dv">150</span><span class="fu">,</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;total_transitions&quot;</span><span class="fu">:</span> <span class="dv">300</span><span class="fu">,</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;unique_patterns&quot;</span><span class="fu">:</span> <span class="dv">12</span><span class="fu">,</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;junctions_analyzed&quot;</span><span class="fu">:</span> <span class="dv">3</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;pattern_types&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;preferred&quot;</span><span class="fu">:</span> <span class="dv">3</span><span class="fu">,</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;learned&quot;</span><span class="fu">:</span> <span class="dv">5</span><span class="fu">,</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;direct&quot;</span><span class="fu">:</span> <span class="dv">4</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;top_patterns&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;from_junction&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="fu">,</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;to_junction&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;from_branch&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;to_branch&quot;</span><span class="fu">:</span> <span class="dv">2</span><span class="fu">,</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;probability&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="er">.</span><span class="dv">85</span><span class="fu">,</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;confidence&quot;</span><span class="fu">:</span> <span class="dv">0</span><span class="er">.</span><span class="dv">92</span><span class="fu">,</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;sample_size&quot;</span><span class="fu">:</span> <span class="dv">23</span><span class="fu">,</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;pattern_type&quot;</span><span class="fu">:</span> <span class="st">&quot;preferred&quot;</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 id="applications">Applications</h3>
<p>The analysis can help identify: - Which junctions are most
predictable vs.¬†variable - How participants adapt to the VR environment
over time - Optimal junction designs based on user behavior - Potential
traffic bottlenecks or flow issues - Evacuation route efficiency and
safety</p>
<h2 id="configuration">Configuration</h2>
<p>Pass <code>--config path/to/config.yaml</code> to any subcommand.
Keys under <code>defaults:</code> apply to all subcommands;
subcommand-specific blocks (<code>discover:</code>,
<code>assign:</code>, <code>metrics:</code>) override defaults.</p>
<p>Example <code>config.yaml</code>:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">defaults</span><span class="kw">:</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">glob</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;*.csv&quot;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">columns</span><span class="kw">:</span><span class="at"> </span><span class="kw">{</span><span class="at"> </span><span class="fu">x</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Headset.Head.Position.X&quot;</span><span class="kw">,</span><span class="at"> </span><span class="fu">z</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Headset.Head.Position.Z&quot;</span><span class="kw">,</span><span class="at"> </span><span class="fu">t</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;Time&quot;</span><span class="at"> </span><span class="kw">}</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">scale</span><span class="kw">:</span><span class="at"> </span><span class="fl">0.2</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">motion_threshold</span><span class="kw">:</span><span class="at"> </span><span class="fl">0.001</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">radius</span><span class="kw">:</span><span class="at"> </span><span class="dv">20</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">distance</span><span class="kw">:</span><span class="at"> </span><span class="dv">100</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">epsilon</span><span class="kw">:</span><span class="at"> </span><span class="fl">0.015</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">junction</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="dv">520</span><span class="kw">,</span><span class="at"> </span><span class="dv">330</span><span class="kw">]</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="fu">discover</span><span class="kw">:</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">decision_mode</span><span class="kw">:</span><span class="at"> hybrid</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">r_outer</span><span class="kw">:</span><span class="at"> </span><span class="dv">30</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">linger_delta</span><span class="kw">:</span><span class="at"> </span><span class="fl">2.0</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">cluster_method</span><span class="kw">:</span><span class="at"> dbscan</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">angle_eps</span><span class="kw">:</span><span class="at"> </span><span class="dv">15</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">show_paths</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">plot_intercepts</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span></code></pre></div>
<h2 id="dependencies">Dependencies</h2>
<h3 id="python-version">Python Version</h3>
<p>VERTA requires <strong>Python ‚â•3.8</strong>. Supported versions
include Python 3.8, 3.9, 3.10, 3.11, and 3.12.</p>
<h3 id="core-dependencies">Core Dependencies</h3>
<ul>
<li><strong>numpy</strong> (‚â•1.20.0) - Numerical computations</li>
<li><strong>pandas</strong> (‚â•1.3.0) - Data manipulation and
analysis</li>
<li><strong>matplotlib</strong> (‚â•3.3.0) - Static plotting and
visualization</li>
<li><strong>tqdm</strong> (‚â•4.60.0) - Progress bars</li>
<li><strong>seaborn</strong> (‚â•0.12.0) - Statistical data
visualization</li>
</ul>
<h3 id="ml-capabilities-intent-recognition">ML Capabilities (Intent
Recognition)</h3>
<ul>
<li><strong>scikit-learn</strong> (‚â•1.0.0) - Machine learning algorithms
(Random Forest, Gradient Boosting)</li>
<li><strong>plotly</strong> (‚â•5.15.0) - Interactive visualization for
feature importance and accuracy analysis</li>
</ul>
<h3 id="optional-dependencies">Optional Dependencies</h3>
<p>Install with <code>pip install verta[yaml]</code>,
<code>pip install verta[parquet]</code>,
<code>pip install verta[gui]</code>, or
<code>pip install verta[test]</code>:</p>
<ul>
<li><strong>config</strong> - YAML configuration file support
(<code>pyyaml</code>)</li>
<li><strong>parquet</strong> - Parquet file format support
(<code>pyarrow</code>)</li>
<li><strong>gui</strong> - Web GUI dependencies (<code>streamlit</code>,
<code>plotly</code>)</li>
<li><strong>test</strong> - Testing dependencies
(<code>pytest&gt;=7.0.0</code>)</li>
</ul>
<h3 id="gui-specific-dependencies">GUI-Specific Dependencies</h3>
<p>For the web interface, install:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install verta<span class="pp">[</span><span class="ss">gui</span><span class="pp">]</span></span></code></pre></div>
<p>This installs: - <strong>streamlit</strong> (‚â•1.28.0) - Web framework
- <strong>plotly</strong> (‚â•5.15.0) - Interactive plotting</p>
<p>Note: Core dependencies (numpy, pandas, matplotlib, seaborn) are
included in the main package installation.</p>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="common-issues">Common Issues</h3>
<p><strong>Import errors:</strong></p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure you&#39;re in the project directory</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /path/to/verta</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Check Python path</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-c</span> <span class="st">&quot;import verta; print(&#39;Package OK&#39;)&quot;</span></span></code></pre></div>
<p><strong>GUI won‚Äôt start:</strong></p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check GUI dependencies</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install verta<span class="pp">[</span><span class="ss">gui</span><span class="pp">]</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Verify Streamlit installation</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-c</span> <span class="st">&quot;import streamlit; print(&#39;Streamlit OK&#39;)&quot;</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Launch the GUI (recommended)</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="ex">verta</span> gui</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Alternative: Launch with explicit path</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="ex">streamlit</span> run src/verta/verta_gui.py</span></code></pre></div>
<p><strong>No trajectories loaded:</strong> - Check file paths and glob
patterns - Verify column mappings match your CSV headers - Ensure files
contain X, Z coordinates (Time optional) - Check scale factor - try
<code>--scale 1.0</code> for raw coordinates</p>
<p><strong>Clustering issues:</strong> - Increase <code>--k</code> if
too few clusters found - Try <code>--cluster_method auto</code> for
automatic cluster detection - Adjust <code>--min_samples</code> for
DBSCAN clustering - Check <code>--angle_eps</code> for angle-based
clustering</p>
<p><strong>Performance issues:</strong> - Reduce number of trajectories
for testing - Use sample data for initial setup - Close other browser
tabs when using GUI - Consider using
<code>--decision_mode pathlen</code> for faster analysis</p>
<p><strong>Memory errors:</strong> - Process data in smaller batches -
Reduce <code>--distance</code> parameter - Use <code>--scale</code> to
reduce coordinate precision</p>
<h3 id="getting-help">Getting Help</h3>
<ol type="1">
<li><strong>Check console output</strong> for detailed error
messages</li>
<li><strong>Verify data format</strong> - CSV files should have X, Z
columns</li>
<li><strong>Try the <a href="sample_data/">sample data</a>
first</strong> to test installation</li>
<li><strong>Check file permissions</strong> for output directories</li>
<li><strong>Review configuration</strong> - use <code>--config</code>
for complex setups</li>
</ol>
<h3 id="data-format-requirements">Data Format Requirements</h3>
<p><strong>Minimum CSV columns:</strong> - X coordinate (any column
name) - Z coordinate (any column name) - Time (optional, enables timing
metrics)</p>
<p><strong>Example CSV:</strong></p>
<pre class="csv"><code>Time,X,Z
0.0,100.0,200.0
0.1,101.0,201.0
...</code></pre>
<p><strong>Column mapping:</strong></p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--columns</span> x=Headset.Head.Position.X,z=Headset.Head.Position.Z,t=Time</span></code></pre></div>
<h2 id="tips">Tips</h2>
<ul>
<li>Use <code>--no-plot_intercepts</code> and
<code>--no-show_paths</code> to disable plotting</li>
<li>The tool prints a suggested <code>--epsilon</code> based on step
statistics</li>
<li>For Parquet inputs, install the <code>[parquet]</code> extra</li>
<li>Use <code>--config</code> for complex multi-command setups</li>
<li>Try <code>--cluster_method auto</code> for automatic cluster
detection</li>
</ul>
<h2 id="ai-usage-disclosure">AI Usage Disclosure</h2>
<p>This project utilized AI-assisted development tools for various
aspects of the codebase:</p>
<ul>
<li><strong>Cursor</strong> and <strong>ChatGPT</strong> were used for:
<ul>
<li>Code refactoring</li>
<li>GUI design</li>
<li>Test scaffolding</li>
<li>Documentation refactoring and elaboration</li>
<li>Paper refinement</li>
<li>Logo design</li>
</ul></li>
</ul>
<h2 id="license">License</h2>
<p>MIT</p>
</body>
</html>
